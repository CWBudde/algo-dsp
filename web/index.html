<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>algo-dsp Web Demo</title>

    <link rel="icon" type="image/png" sizes="32x32" href="Algo-X-32.png" />
    <link rel="icon" type="image/png" sizes="64x64" href="Algo-X-64.png" />
    <link rel="apple-touch-icon" href="Algo-X-256.png" />

    <meta property="og:title" content="algo-dsp Web Demo" />
    <meta property="og:description" content="Interactive high-performance DSP demo featuring a step synthesizer, 5-node EQ, chorus, reverb, and dynamics processing." />
    <meta property="og:image" content="Algo-X-256.png" />
    <meta property="og:type" content="website" />

    <script>
      (() => {
        try {
          const stored = localStorage.getItem("algo-dsp-theme");
          const selected = stored === "light" || stored === "dark" || stored === "system" ? stored : "system";
          const mql = window.matchMedia("(prefers-color-scheme: dark)");
          const resolved = selected === "system" ? (mql.matches ? "dark" : "light") : selected;
          const root = document.documentElement;
          root.dataset.theme = selected;
          root.dataset.resolvedTheme = resolved;
        } catch {
          const root = document.documentElement;
          root.dataset.theme = "system";
          root.dataset.resolvedTheme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        }
      })();
    </script>
    <link rel="stylesheet" href="styles.css" />
    <script src="eq-canvas.js" defer></script>
    <script src="dynamics-graph.js" defer></script>
    <script src="effect-chain.js" defer></script>
    <script src="wasm_exec.js" defer></script>
    <script src="app.js" defer></script>
  </head>
  <body>
    <main class="app">
      <header class="hero">
        <div class="hero-top">
          <h1>algo-dsp Web Demo</h1>
          <button id="theme-toggle" class="theme-toggle" type="button" title="Theme follows system until toggled" aria-label="Toggle theme">
            <svg
              class="theme-toggle-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              aria-hidden="true"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <span class="theme-toggle-label">Theme</span>
          </button>
        </div>
        <p>Step synthesizer (pure tones + decay) with realtime 5-node EQ.</p>
      </header>

      <section class="panel transport">
        <div class="row">
          <button id="run-toggle" class="icon-btn" type="button" aria-label="Play">
            <span class="icon icon-play" aria-hidden="true"></span>
            <span class="icon icon-stop" aria-hidden="true"></span>
            <span class="sr-only">Play</span>
          </button>
          <label>
            Tempo
            <input id="tempo" type="range" min="60" max="180" value="110" />
            <span id="tempo-value">110 BPM</span>
          </label>
          <label>
            Shuffle
            <input id="shuffle" type="range" min="0" max="1" step="0.01" value="0" />
            <span id="shuffle-value">0%</span>
          </label>
          <label>
            Decay
            <input id="decay" type="range" min="0.04" max="0.8" step="0.01" value="0.2" />
            <span id="decay-value">0.20 s</span>
          </label>
          <label>
            Waveform
            <select id="waveform">
              <option value="sine" selected>Sine</option>
              <option value="triangle">Triangle</option>
              <option value="saw">Saw</option>
              <option value="square">Square</option>
            </select>
          </label>
        </div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2>Steps</h2>
          <div class="panel-controls">
            <label>
              Scale
              <select id="scale">
                <option value="pentatonic" selected>Pentatonic Major</option>
                <option value="pentatonicMinor">Pentatonic Minor</option>
                <option value="major">Major</option>
                <option value="minor">Minor</option>
                <option value="dorian">Dorian</option>
                <option value="phrygian">Phrygian</option>
                <option value="lydian">Lydian</option>
                <option value="mixolydian">Mixolydian</option>
                <option value="blues">Blues</option>
                <option value="hijazkiar">Hijazkiar</option>
                <option value="chromatic">Chromatic</option>
              </select>
            </label>
            <label>
              Root
              <select id="root-note">
                <option value="C" selected>C</option>
                <option value="C#">C#</option>
                <option value="D">D</option>
                <option value="D#">D#</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="F#">F#</option>
                <option value="G">G</option>
                <option value="G#">G#</option>
                <option value="A">A</option>
                <option value="A#">A#</option>
                <option value="B">B</option>
              </select>
            </label>
            <button id="randomize-steps" class="secondary" type="button">Randomize</button>
          </div>
        </div>
        <div id="steps" class="steps"></div>
      </section>

      <section class="panel eq-panel">
        <div class="eq-head">
          <h2>EQ</h2>
          <p id="eq-readout" class="eq-readout">Hover a node for details.</p>
        </div>
        <canvas id="eq-canvas" height="400" aria-label="Interactive EQ graph"></canvas>
        <div class="analyzer-band">
          <label>
            FFT Size
            <select id="analyzer-fft">
              <option value="256">256</option>
              <option value="512">512</option>
              <option value="1024">1024</option>
              <option value="2048" selected>2048</option>
              <option value="4096">4096</option>
              <option value="8192">8192</option>
            </select>
          </label>
          <label>
            Overlap
            <input id="analyzer-overlap" type="range" min="25" max="90" step="1" value="75" />
            <span id="analyzer-overlap-value">75% overlap (25% hop)</span>
          </label>
          <label>
            Window
            <select id="analyzer-window">
              <option value="hann">Hann</option>
              <option value="hamming">Hamming</option>
              <option value="blackman">Blackman</option>
              <option value="blackmanharris" selected>Blackman-Harris</option>
              <option value="flattop">Flat Top</option>
            </select>
          </label>
          <label>
            Smoothing
            <input id="analyzer-smoothing" type="range" min="0" max="0.95" step="0.01" value="0.65" />
            <span id="analyzer-smoothing-value">0.65</span>
          </label>
        </div>
        <div class="eq-meta">
        </div>
      </section>

      <section class="panel chain-panel">
        <div class="chain-head">
          <h2>Effects Chain</h2>
          <p class="chain-hint">Right-click to add effects. Drag blocks with left button. Click a block for details.</p>
        </div>
        <div class="chain-canvas-wrap">
          <canvas id="chain-canvas" height="280" aria-label="Effect chain graph editor"></canvas>
        </div>
        <div id="chain-detail" class="chain-detail" hidden>
          <div class="chain-detail-inner">
            <div class="fx-card chain-detail-card" data-chain-detail="chorus" hidden>
              <div class="fx-option-head">
                <span>Chorus</span>
              </div>
              <label>
                Mix
                <input id="chorus-mix" type="range" min="0" max="0.6" step="0.01" value="0.18" />
                <span id="chorus-mix-value">18%</span>
              </label>
              <label>
                Depth
                <input id="chorus-depth" type="range" min="0" max="0.01" step="0.0001" value="0.003" />
                <span id="chorus-depth-value">3.0 ms</span>
              </label>
              <label>
                Speed
                <input id="chorus-speed" type="range" min="0.05" max="5" step="0.01" value="0.35" />
                <span id="chorus-speed-value">0.35 Hz</span>
              </label>
              <label>
                Stages
                <input id="chorus-stages" type="range" min="1" max="6" step="1" value="3" />
                <span id="chorus-stages-value">3</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="delay" hidden>
              <div class="fx-option-head">
                <span>Delay</span>
              </div>
              <label>
                Time
                <input id="delay-time" type="range" min="0.01" max="2" step="0.01" value="0.25" />
                <span id="delay-time-value">250 ms</span>
              </label>
              <label>
                Feedback
                <input id="delay-feedback" type="range" min="0" max="0.95" step="0.01" value="0.35" />
                <span id="delay-feedback-value">35%</span>
              </label>
              <label>
                Mix
                <input id="delay-mix" type="range" min="0" max="1" step="0.01" value="0.25" />
                <span id="delay-mix-value">25%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="flanger" hidden>
              <div class="fx-option-head">
                <span>Flanger</span>
              </div>
              <label>
                Rate
                <input id="flanger-rate" type="range" min="0.05" max="5" step="0.01" value="0.25" />
                <span id="flanger-rate-value">0.25 Hz</span>
              </label>
              <label>
                Depth
                <input id="flanger-depth" type="range" min="0" max="0.009" step="0.0001" value="0.0015" />
                <span id="flanger-depth-value">1.50 ms</span>
              </label>
              <label>
                Base Delay
                <input id="flanger-base-delay" type="range" min="0.0001" max="0.01" step="0.0001" value="0.001" />
                <span id="flanger-base-delay-value">1.00 ms</span>
              </label>
              <label>
                Feedback
                <input id="flanger-feedback" type="range" min="-0.95" max="0.95" step="0.01" value="0.25" />
                <span id="flanger-feedback-value">25%</span>
              </label>
              <label>
                Mix
                <input id="flanger-mix" type="range" min="0" max="1" step="0.01" value="0.5" />
                <span id="flanger-mix-value">50%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="ringmod" hidden>
              <div class="fx-option-head">
                <span>Ring Modulator</span>
              </div>
              <label>
                Carrier
                <input id="ringmod-carrier" type="range" min="20" max="4000" step="1" value="440" />
                <span id="ringmod-carrier-value">440.0 Hz</span>
              </label>
              <label>
                Mix
                <input id="ringmod-mix" type="range" min="0" max="1" step="0.01" value="1" />
                <span id="ringmod-mix-value">100%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="bitcrusher" hidden>
              <div class="fx-option-head">
                <span>Bit Crusher</span>
              </div>
              <label>
                Bit Depth
                <input id="bitcrusher-bits" type="range" min="1" max="16" step="0.1" value="8" />
                <span id="bitcrusher-bits-value">8.0 bit</span>
              </label>
              <label>
                Downsample
                <input id="bitcrusher-downsample" type="range" min="1" max="64" step="1" value="4" />
                <span id="bitcrusher-downsample-value">4x</span>
              </label>
              <label>
                Mix
                <input id="bitcrusher-mix" type="range" min="0" max="1" step="0.01" value="1" />
                <span id="bitcrusher-mix-value">100%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="distortion" hidden>
              <div class="fx-option-head">
                <span>Distortion</span>
              </div>
              <label>
                Mode
                <select id="distortion-mode">
                  <option value="softclip">Soft Clip</option>
                  <option value="hardclip">Hard Clip</option>
                  <option value="tanh">Tanh</option>
                  <option value="waveshaper1">Waveshaper 1</option>
                  <option value="waveshaper2">Waveshaper 2</option>
                  <option value="waveshaper3">Waveshaper 3</option>
                  <option value="waveshaper4">Waveshaper 4</option>
                  <option value="waveshaper5">Waveshaper 5</option>
                  <option value="waveshaper6">Waveshaper 6</option>
                  <option value="waveshaper7">Waveshaper 7</option>
                  <option value="waveshaper8">Waveshaper 8</option>
                  <option value="saturate">Saturate</option>
                  <option value="saturate2">Saturate 2</option>
                  <option value="softsat">SoftSat</option>
                  <option value="chebyshev">Chebyshev</option>
                </select>
              </label>
              <label>
                Approx
                <select id="distortion-approx">
                  <option value="exact">Exact</option>
                  <option value="polynomial">Polynomial</option>
                </select>
              </label>
              <label>
                Drive
                <input id="distortion-drive" type="range" min="0.1" max="20" step="0.01" value="1.8" />
                <span id="distortion-drive-value">1.80x</span>
              </label>
              <label>
                Mix
                <input id="distortion-mix" type="range" min="0" max="1" step="0.01" value="1.0" />
                <span id="distortion-mix-value">100%</span>
              </label>
              <label>
                Output
                <input id="distortion-output" type="range" min="0" max="4" step="0.01" value="1.0" />
                <span id="distortion-output-value">1.00x</span>
              </label>
              <label>
                Clip
                <input id="distortion-clip" type="range" min="0.05" max="1" step="0.01" value="1.0" />
                <span id="distortion-clip-value">1.00</span>
              </label>
              <label>
                Shape
                <input id="distortion-shape" type="range" min="0" max="1" step="0.01" value="0.5" />
                <span id="distortion-shape-value">0.50</span>
              </label>
              <label>
                Bias
                <input id="distortion-bias" type="range" min="-1" max="1" step="0.01" value="0" />
                <span id="distortion-bias-value">0.00</span>
              </label>
              <label>
                Cheb Order
                <input id="distortion-cheb-order" type="range" min="1" max="16" step="1" value="3" />
                <span id="distortion-cheb-order-value">3</span>
              </label>
              <label>
                Cheb Harmonics
                <select id="distortion-cheb-harmonic">
                  <option value="all">All</option>
                  <option value="odd">Odd</option>
                  <option value="even">Even</option>
                </select>
              </label>
              <label>
                Cheb Invert
                <select id="distortion-cheb-invert">
                  <option value="0">Off</option>
                  <option value="1">On</option>
                </select>
              </label>
              <label>
                Cheb Gain
                <input id="distortion-cheb-gain" type="range" min="0" max="4" step="0.01" value="1.0" />
                <span id="distortion-cheb-gain-value">1.00x</span>
              </label>
              <label>
                Cheb DC Bypass
                <select id="distortion-cheb-dc-bypass">
                  <option value="0">Off</option>
                  <option value="1">On</option>
                </select>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="transformer" hidden>
              <div class="fx-option-head">
                <span>Transformer Saturation</span>
              </div>
              <label>
                Quality
                <select id="transformer-quality">
                  <option value="high">High</option>
                  <option value="lightweight">Lightweight</option>
                </select>
              </label>
              <label>
                Drive
                <input id="transformer-drive" type="range" min="0.1" max="20" step="0.01" value="2.0" />
                <span id="transformer-drive-value">2.00x</span>
              </label>
              <label>
                Mix
                <input id="transformer-mix" type="range" min="0" max="1" step="0.01" value="1.0" />
                <span id="transformer-mix-value">100%</span>
              </label>
              <label>
                Output
                <input id="transformer-output" type="range" min="0" max="4" step="0.01" value="1.0" />
                <span id="transformer-output-value">1.00x</span>
              </label>
              <label>
                High-pass
                <input id="transformer-highpass" type="range" min="5" max="400" step="1" value="25" />
                <span id="transformer-highpass-value">25 Hz</span>
              </label>
              <label>
                Damping
                <input id="transformer-damping" type="range" min="500" max="18000" step="10" value="9000" />
                <span id="transformer-damping-value">9000 Hz</span>
              </label>
              <label>
                Oversampling
                <select id="transformer-oversampling">
                  <option value="2">2x</option>
                  <option value="4" selected>4x</option>
                  <option value="8">8x</option>
                </select>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="filter" hidden>
              <div class="fx-option-head">
                <span>Filter</span>
              </div>
              <label>
                Family
                <select id="fx-filter-family">
                  <option value="rbj">RBJ</option>
                  <option value="butterworth">Butterworth</option>
                  <option value="bessel">Bessel</option>
                  <option value="chebyshev1">Chebyshev I</option>
                  <option value="chebyshev2">Chebyshev II</option>
                  <option value="elliptic">Elliptic</option>
                </select>
              </label>
              <label>
                Type
                <select id="fx-filter-kind">
                  <option value="lowpass">Lowpass</option>
                  <option value="highpass">Highpass</option>
                  <option value="bandpass">Bandpass</option>
                  <option value="allpass">Allpass</option>
                  <option value="peak">Peak</option>
                  <option value="notch">Notch</option>
                  <option value="lowshelf">Low Shelf</option>
                  <option value="highshelf">High Shelf</option>
                </select>
              </label>
              <label>
                Order
                <input id="fx-filter-order" type="range" min="1" max="12" step="1" value="2" />
                <span id="fx-filter-order-value">2</span>
              </label>
              <label>
                Frequency
                <input id="fx-filter-freq" type="range" min="20" max="18000" step="1" value="1200" />
                <span id="fx-filter-freq-value">1200 Hz</span>
              </label>
              <label>
                Shape
                <input id="fx-filter-q" type="range" min="0.2" max="8" step="0.01" value="0.707" />
                <span id="fx-filter-q-value">0.71</span>
              </label>
              <label>
                Gain
                <input id="fx-filter-gain" type="range" min="-24" max="24" step="0.1" value="0" />
                <span id="fx-filter-gain-value">0.0 dB</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="dyn-compressor" hidden>
              <div class="fx-option-head">
                <span>Compressor (Chain)</span>
              </div>
              <label>
                Threshold
                <input id="fx-comp-thresh" type="range" min="-60" max="0" step="0.5" value="-20" />
                <span id="fx-comp-thresh-value">-20.0 dB</span>
              </label>
              <label>
                Ratio
                <input id="fx-comp-ratio" type="range" min="1" max="20" step="0.1" value="4" />
                <span id="fx-comp-ratio-value">4.0:1</span>
              </label>
              <label>
                Knee
                <input id="fx-comp-knee" type="range" min="0" max="24" step="0.5" value="6" />
                <span id="fx-comp-knee-value">6.0 dB</span>
              </label>
              <label>
                Attack
                <input id="fx-comp-attack" type="range" min="0.1" max="100" step="0.1" value="10" />
                <span id="fx-comp-attack-value">10.0 ms</span>
              </label>
              <label>
                Release
                <input id="fx-comp-release" type="range" min="10" max="1000" step="1" value="100" />
                <span id="fx-comp-release-value">100 ms</span>
              </label>
              <label>
                Makeup
                <input id="fx-comp-makeup" type="range" min="0" max="24" step="0.1" value="0" />
                <span id="fx-comp-makeup-value">0.0 dB</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="dyn-limiter" hidden>
              <div class="fx-option-head">
                <span>Limiter (Chain)</span>
              </div>
              <label>
                Threshold
                <input id="fx-lim-thresh" type="range" min="-24" max="0" step="0.1" value="-0.1" />
                <span id="fx-lim-thresh-value">-0.1 dB</span>
              </label>
              <label>
                Release
                <input id="fx-lim-release" type="range" min="1" max="1000" step="1" value="100" />
                <span id="fx-lim-release-value">100 ms</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="dyn-gate" hidden>
              <div class="fx-option-head">
                <span>Gate / Expander (Chain)</span>
              </div>
              <label>
                Mode
                <select id="fx-gate-mode">
                  <option value="gate">Gate</option>
                  <option value="expander">Expander</option>
                </select>
              </label>
              <label>
                Threshold
                <input id="fx-gate-thresh" type="range" min="-80" max="0" step="0.5" value="-40" />
                <span id="fx-gate-thresh-value">-40.0 dB</span>
              </label>
              <label>
                Ratio
                <input id="fx-gate-ratio" type="range" min="1" max="20" step="0.1" value="10" />
                <span id="fx-gate-ratio-value">10.0:1</span>
              </label>
              <label>
                Knee
                <input id="fx-gate-knee" type="range" min="0" max="24" step="0.5" value="6" />
                <span id="fx-gate-knee-value">6.0 dB</span>
              </label>
              <label>
                Attack
                <input id="fx-gate-attack" type="range" min="0.1" max="200" step="0.1" value="0.1" />
                <span id="fx-gate-attack-value">0.1 ms</span>
              </label>
              <label>
                Hold
                <input id="fx-gate-hold" type="range" min="0" max="500" step="1" value="50" />
                <span id="fx-gate-hold-value">50 ms</span>
              </label>
              <label>
                Release
                <input id="fx-gate-release" type="range" min="1" max="1000" step="1" value="100" />
                <span id="fx-gate-release-value">100 ms</span>
              </label>
              <label>
                Range
                <input id="fx-gate-range" type="range" min="-120" max="0" step="1" value="-80" />
                <span id="fx-gate-range-value">-80 dB</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="widener" hidden>
              <div class="fx-option-head">
                <span>Stereo Widener</span>
              </div>
              <label>
                Width
                <input id="widener-width" type="range" min="0" max="3" step="0.01" value="1" />
                <span id="widener-width-value">1.00x</span>
              </label>
              <label>
                Mix
                <input id="widener-mix" type="range" min="0" max="1" step="0.01" value="0.5" />
                <span id="widener-mix-value">50%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="split" hidden>
              <div class="fx-option-head">
                <span>Split</span>
              </div>
              <p>Split duplicates the signal to multiple downstream branches.</p>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="sum" hidden>
              <div class="fx-option-head">
                <span>Sum</span>
              </div>
              <p>Sum mixes all incoming branches and forwards a single output.</p>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="phaser" hidden>
              <div class="fx-option-head">
                <span>Phaser</span>
              </div>
              <label>
                Rate
                <input id="phaser-rate" type="range" min="0.05" max="5" step="0.01" value="0.4" />
                <span id="phaser-rate-value">0.40 Hz</span>
              </label>
              <label>
                Min Frequency
                <input id="phaser-min-freq" type="range" min="20" max="3000" step="1" value="300" />
                <span id="phaser-min-freq-value">300 Hz</span>
              </label>
              <label>
                Max Frequency
                <input id="phaser-max-freq" type="range" min="40" max="8000" step="1" value="1600" />
                <span id="phaser-max-freq-value">1600 Hz</span>
              </label>
              <label>
                Stages
                <input id="phaser-stages" type="range" min="1" max="12" step="1" value="6" />
                <span id="phaser-stages-value">6</span>
              </label>
              <label>
                Feedback
                <input id="phaser-feedback" type="range" min="-0.95" max="0.95" step="0.01" value="0.2" />
                <span id="phaser-feedback-value">20%</span>
              </label>
              <label>
                Mix
                <input id="phaser-mix" type="range" min="0" max="1" step="0.01" value="0.5" />
                <span id="phaser-mix-value">50%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="tremolo" hidden>
              <div class="fx-option-head">
                <span>Tremolo</span>
              </div>
              <label>
                Rate
                <input id="tremolo-rate" type="range" min="0.1" max="20" step="0.1" value="4" />
                <span id="tremolo-rate-value">4.00 Hz</span>
              </label>
              <label>
                Depth
                <input id="tremolo-depth" type="range" min="0" max="1" step="0.01" value="0.6" />
                <span id="tremolo-depth-value">60%</span>
              </label>
              <label>
                Smoothing
                <input id="tremolo-smoothing" type="range" min="0" max="200" step="1" value="5" />
                <span id="tremolo-smoothing-value">5.0 ms</span>
              </label>
              <label>
                Mix
                <input id="tremolo-mix" type="range" min="0" max="1" step="0.01" value="1" />
                <span id="tremolo-mix-value">100%</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="bass" hidden>
              <div class="fx-option-head">
                <span>Psychoacoustic Bass</span>
              </div>
              <label>
                Frequency
                <input id="harmonic-frequency" type="range" min="30" max="200" step="1" value="80" />
                <span id="harmonic-frequency-value">80 Hz</span>
              </label>
              <label>
                Input
                <input id="harmonic-input" type="range" min="0" max="2" step="0.01" value="1" />
                <span id="harmonic-input-value">1.00</span>
              </label>
              <label>
                High
                <input id="harmonic-high" type="range" min="0" max="2" step="0.01" value="1" />
                <span id="harmonic-high-value">1.00</span>
              </label>
              <label>
                Original
                <input id="harmonic-original" type="range" min="0" max="2" step="0.01" value="1" />
                <span id="harmonic-original-value">1.00</span>
              </label>
              <label>
                Harmonics
                <input id="harmonic-harmonic" type="range" min="0" max="2" step="0.01" value="0" />
                <span id="harmonic-harmonic-value">0.00</span>
              </label>
              <label>
                Decay
                <input id="harmonic-decay" type="range" min="-1" max="1" step="0.01" value="0" />
                <span id="harmonic-decay-value">0.00</span>
              </label>
              <label>
                Response
                <input id="harmonic-response" type="range" min="1" max="200" step="1" value="20" />
                <span id="harmonic-response-value">20 ms</span>
              </label>
              <label>
                Highpass
                <select id="harmonic-highpass">
                  <option value="0">DC</option>
                  <option value="1">1st Order</option>
                  <option value="2">2nd Order</option>
                </select>
                <span id="harmonic-highpass-value">DC</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="pitch-time" hidden>
              <div class="fx-option-head">
                <span>Pitch Shifter (Time)</span>
              </div>
              <label>
                Semitones
                <input id="time-pitch-semitones" type="range" min="-24" max="24" step="0.1" value="0" />
                <span id="time-pitch-semitones-value">0.0 st</span>
              </label>
              <label>
                Sequence
                <input id="time-pitch-sequence" type="range" min="20" max="120" step="1" value="40" />
                <span id="time-pitch-sequence-value">40 ms</span>
              </label>
              <label>
                Overlap
                <input id="time-pitch-overlap" type="range" min="4" max="60" step="1" value="10" />
                <span id="time-pitch-overlap-value">10 ms</span>
              </label>
              <label>
                Search
                <input id="time-pitch-search" type="range" min="2" max="40" step="1" value="15" />
                <span id="time-pitch-search-value">15 ms</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="pitch-spectral" hidden>
              <div class="fx-option-head">
                <span>Pitch Shifter (Spectral)</span>
              </div>
              <label>
                Semitones
                <input id="spectral-pitch-semitones" type="range" min="-24" max="24" step="0.1" value="0" />
                <span id="spectral-pitch-semitones-value">0.0 st</span>
              </label>
              <label>
                Frame
                <select id="spectral-pitch-frame">
                  <option value="256">256</option>
                  <option value="512">512</option>
                  <option value="1024" selected>1024</option>
                  <option value="2048">2048</option>
                  <option value="4096">4096</option>
                </select>
                <span id="spectral-pitch-frame-value">1024 samples</span>
              </label>
              <label>
                Hop
                <select id="spectral-pitch-hop-ratio">
                  <option value="0.125">12.5%</option>
                  <option value="0.25" selected>25%</option>
                  <option value="0.5">50%</option>
                </select>
                <span id="spectral-pitch-hop-ratio-value">256 samples (25%)</span>
              </label>
            </div>
            <div class="fx-card chain-detail-card" data-chain-detail="reverb" hidden>
              <div class="fx-option-head">
                <span>Reverb</span>
              </div>
              <label>
                Model
                <select id="reverb-model">
                  <option value="freeverb" selected>Freeverb</option>
                  <option value="fdn">FDN</option>
                </select>
              </label>
              <label>
                Wet
                <input id="reverb-wet" type="range" min="0" max="1" step="0.01" value="0.22" />
                <span id="reverb-wet-value">22%</span>
              </label>
              <label>
                Dry
                <input id="reverb-dry" type="range" min="0" max="1.5" step="0.01" value="1" />
                <span id="reverb-dry-value">1.00</span>
              </label>
              <label class="reverb-freeverb">
                Room
                <input id="reverb-room" type="range" min="0" max="0.98" step="0.01" value="0.72" />
                <span id="reverb-room-value">0.72</span>
              </label>
              <label>
                Damp
                <input id="reverb-damp" type="range" min="0" max="0.99" step="0.01" value="0.45" />
                <span id="reverb-damp-value">0.45</span>
              </label>
              <label class="reverb-fdn" hidden>
                RT60
                <input id="reverb-rt60" type="range" min="0.2" max="8" step="0.05" value="1.8" />
                <span id="reverb-rt60-value">1.80 s</span>
              </label>
              <label class="reverb-fdn" hidden>
                Pre-delay
                <input id="reverb-predelay" type="range" min="0" max="0.08" step="0.001" value="0.01" />
                <span id="reverb-predelay-value">10.0 ms</span>
              </label>
              <label class="reverb-fdn" hidden>
                Mod depth
                <input id="reverb-mod-depth" type="range" min="0" max="0.01" step="0.0001" value="0.002" />
                <span id="reverb-mod-depth-value">2.0 ms</span>
              </label>
              <label class="reverb-fdn" hidden>
                Mod rate
                <input id="reverb-mod-rate" type="range" min="0" max="1" step="0.01" value="0.1" />
                <span id="reverb-mod-rate-value">0.10 Hz</span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <section class="panel output-panel">
        <h2>Output</h2>
        <div class="effects-grid dynamics-grid">
          <div class="fx-card comp-card">
            <div class="fx-head">
              <h3>Compressor</h3>
              <label class="fx-toggle">
                <input id="comp-enabled" type="checkbox" />
                <span>On</span>
              </label>
            </div>
            <label>
              Threshold
              <input id="comp-thresh" type="range" min="-60" max="0" step="0.5" value="-20" />
              <span id="comp-thresh-value">-20.0 dB</span>
            </label>
            <label>
              Ratio
              <input id="comp-ratio" type="range" min="1" max="20" step="0.1" value="4" />
              <span id="comp-ratio-value">4.0:1</span>
            </label>
            <label>
              Knee
              <input id="comp-knee" type="range" min="0" max="24" step="0.5" value="6" />
              <span id="comp-knee-value">6.0 dB</span>
            </label>
            <label>
              Attack
              <input id="comp-attack" type="range" min="0.1" max="100" step="0.1" value="10" />
              <span id="comp-attack-value">10.0 ms</span>
            </label>
            <label>
              Release
              <input id="comp-release" type="range" min="10" max="1000" step="1" value="100" />
              <span id="comp-release-value">100 ms</span>
            </label>
            <label class="fx-toggle-row">
              <span>Auto Makeup</span>
              <label class="fx-toggle">
                <input id="comp-auto" type="checkbox" checked />
                <span>On</span>
              </label>
            </label>
            <label>
              Makeup
              <input id="comp-makeup" type="range" min="0" max="24" step="0.1" value="0" disabled />
              <span id="comp-makeup-value">0.0 dB</span>
            </label>
          </div>

          <div class="fx-card visuals-card">
            <div class="fx-head">
              <h3>Dynamics</h3>
            </div>
            <div class="dynamics-plots">
              <div class="plot-item">
                <canvas id="comp-graph" width="160" height="160"></canvas>
                <span class="plot-label">Compressor</span>
              </div>
              <div class="plot-item">
                <canvas id="lim-graph" width="160" height="160"></canvas>
                <span class="plot-label">Limiter</span>
              </div>
            </div>
          </div>

          <div class="fx-card lim-card">
            <div class="fx-head">
              <h3>Limiter</h3>
              <label class="fx-toggle">
                <input id="lim-enabled" type="checkbox" checked />
                <span>On</span>
              </label>
            </div>
            <label>
              Ceiling
              <input id="lim-thresh" type="range" min="-24" max="0" step="0.1" value="-0.1" />
              <span id="lim-thresh-value">-0.1 dB</span>
            </label>
            <label>
              Release
              <input id="lim-release" type="range" min="1" max="1000" step="1" value="100" />
              <span id="lim-release-value">100 ms</span>
            </label>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
